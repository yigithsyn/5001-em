<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>5001-em</title>

  <link rel="stylesheet" href="bower_components/webix/codebase/skins/compact.css" type="text/css">
  <script src="bower_components/webix/codebase/webix.js"></script>
  
  <link rel="stylesheet" href="bower_components/katex/dist/katex.min.css" type="text/css">
  <script src="bower_components/katex/dist/katex.min.js"></script>
</head>

<body>
  <script>
    function formatBytes(a, b) {
      if (0 == a) return "0 Bytes";
      var c = 1024, d = b || 2,
        e = ["Bytes", "KB", "MB", "GB", "TB", "PB", "EB", "ZB", "YB"],
        f = Math.floor(Math.log(a) / Math.log(c));
      return parseFloat((a / Math.pow(c, f)).toFixed(d)) + " " + e[f]
    }
    webix.ready(function () {
      var myjson = webix.DataDriver.myjson = webix.copy(webix.DataDriver.json);
      myjson.child = function (obj) {
        if (obj.$level == 2){
          return obj.versions
        }
        else return obj.items
      };

      display = function (obj) {
        if (obj.$level == 2 && obj.$parent == "const"){
          return obj.value
        }
        else if(obj.$level == 3){
          return katex.renderToString(obj.formula)
        }
        else return ""
      };

      webix.ui({
        rows: [
          {
            id: "directoryTree",
            view: "treetable",
            columns: [
              { id: "name", header: "Path", fillspace: 2, template: "{common.treetable()} #name#" },
              { id: "size", header: "Size", fillspace: 1, template: display },
            ],
            url: "/em",
            datatype: "myjson",
            select: true,
          }
        ]
      });
      setTimeout(function () { $$("directoryTree").openAll() }, 2000)
    })
    </script>
</body>

</html>